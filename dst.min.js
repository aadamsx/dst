function valueof(e){return Object.values(e)[0]}function is(e){return"function"==typeof e?"var":"object"==typeof e?null==valueof(e)?"end":"section":void 0}export function dst(e,...t){let n={},r=[];for(let e=0;e<t.length;e++)switch(is(t[e])){case"section":r.push(e);break;case"end":if(0==r.length)throw`End section at position ${e} has no start`;n[r.pop()]=e}if(r.length>0)throw`Start section at position ${r.pop()} has no matching end`;let i=[...e];for(let n=0;n<t.length;n++)["section","end"].includes(is(t[n]))&&e[n].endsWith("\n")&&e[n+1].startsWith("\n")&&(i[n+1]=i[n+1].slice(1));return["section","end"].includes(is(t[0]))&&["","\n"].includes(e[0])&&e[1].startsWith("\n")&&(i[1]=e[1].slice(1),"\n"==i[0]&&(i[0]="")),render(i,t,n,[],0,e.length)}function render(e,t,n,r,i,o){let s="";for(let l=i;l<o-1;l++){s+=e[l];let i=t[l];switch(is(i)){case"section":if("var"==is(i=valueof(i))&&(i=i(...r)),Array.isArray(i))for(let r=0;r<i.length;r++)s+=render(e,t,n,[i[r],r,i],l+1,n[l]+1);else i&&(s+=render(e,t,n,r,l+1,n[l]+1));l=n[l];break;case"var":s+=i(...r);break;default:s+=i}}return s+e[o-1]}let handler={apply:function(e,t,n){return e(...n)},get:function(e,t,n){return new Proxy((n,r,i)=>e(n,r,i)[t],handler)}};export let item=new Proxy((e,t,n)=>e,handler);